# ë‚˜ë…¸ë¡œë´‡ ì œì–´ë¥¼ ìœ„í•œ í†µí•© ì•Œê³ ë¦¬ì¦˜ ì²´ê³„

## 1. ê¸°ë³¸ ì œì–´ ë°©ì •ì‹ ìœ ë„

### 1.1 Kim-Einstein-Navier ë°©ì •ì‹ì—ì„œ ë‚˜ë…¸ë¡œë´‡ ì œì–´í•™ ë¶„ë¦¬

**ê¸°ë³¸ ë°©ì •ì‹:** ë‚˜ë…¸ë¡œë´‡ì˜ ìš´ë™ì„ ê¸°ìˆ í•˜ê¸° ìœ„í•´ ìœ ì²´ì—­í•™ì˜ ë‚˜ë¹„ì—-ìŠ¤í† í¬ìŠ¤ ë°©ì •ì‹ì— ë‹¤ì–‘í•œ ë¬¼ë¦¬ì  ìš”ì†Œë¥¼ í¬í•¨ì‹œí‚¨ ì¼ë°˜í™”ëœ í˜•íƒœì…ë‹ˆë‹¤.

$$\frac{\partial(\rho v)}{\partial t} + (v \cdot \nabla)v + \rho \left(\frac{\partial e}{\partial t}\right) \nabla v = -\nabla p + \mu \nabla^2 v + J \times B + F_{bio} + F_{nano}$$

**ë‚˜ë…¸ë¡œë´‡ ì œì–´í•­ $F_{nano}$ ë¶„í•´:** ë‚˜ë…¸ë¡œë´‡ì— ê°€í•´ì§€ëŠ” ì´ ì œì–´ë ¥ì€ ì—¬ëŸ¬ ë¬¼ë¦¬ì  ì›ë¦¬ì— ë”°ë¼ ë¶„í•´ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

$$F_{nano} = F_{magnetic} + F_{electric} + F_{chemical} + F_{mechanical} + F_{feedback}[\text{cite: 7}]$$

---

### 1.2 ê° ì œì–´ë ¥ ì„±ë¶„ì˜ ìƒì„¸ ìœ ë„

#### 1.2.1 ìê¸°ë ¥ ì œì–´ ($F_{magnetic}$) ğŸ§²

**ë‚˜ë…¸ë¡œë´‡ì˜ ìê¸° ëª¨ë©˜íŠ¸:**

$$m = m_0 \hat{z} \text{ (ë‹¨ìœ„: Aâ‹…m}^2\text{)}$$

**ì™¸ë¶€ ìê¸°ì¥:**

$$B = B_0(\hat{x}\cos(\omega t) + \hat{y}\sin(\omega t)) + B_z \hat{z}$$

**ìê¸°ë ¥ (ìˆ˜ì •ë¨):** ìê¸°ë ¥ì€ ìê¸° ëª¨ë©˜íŠ¸ì™€ ìê¸°ì¥ì˜ ë‚´ì ($m \cdot B$)ì˜ ê·¸ë˜ë””ì–¸íŠ¸ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.

$$F_{magnetic} = \nabla(m \cdot B)$$

**ì„±ë¶„ë³„ ì „ê°œ (ìˆ˜ì •ë¨):** $m \cdot B = m_0 B_z$ ì´ë¯€ë¡œ, ê° ì„±ë¶„ì€ $B_z$ì˜ ê³µê°„ì— ëŒ€í•œ í¸ë¯¸ë¶„ìœ¼ë¡œ í‘œí˜„ë©ë‹ˆë‹¤.

- $F_{magnetic,x} = m_0 \frac{\partial B_z}{\partial x}$
- $F_{magnetic,y} = m_0 \frac{\partial B_z}{\partial y}$
- $F_{magnetic,z} = m_0 \frac{\partial B_z}{\partial z}$

**ìê¸° í† í¬:**

$$\tau_{magnetic} = m \times B = m_0 B_0[\sin(\omega t)\hat{x} - \cos(\omega t)\hat{y}][\text{cite: 18}]$$

---

#### 1.2.2 ì „ê¸°ë ¥ ì œì–´ ($F_{electric}$) âš¡

**ë‚˜ë…¸ë¡œë´‡ì˜ ì „ê¸° ìŒê·¹ì ëª¨ë©˜íŠ¸:**

$$p = p_0 \hat{z} \text{ (ë‹¨ìœ„: Câ‹…m)}$$

**ì „ê¸°ì¥:**

$$E = E_0(\hat{x}\cos(\omega_e t) + \hat{y}\sin(\omega_e t)) + E_z \hat{z}$$

**ì „ê¸°ë ¥ (ìˆ˜ì •ë¨):** ì „ê¸°ë ¥ì€ ì „ê¸° ìŒê·¹ì ëª¨ë©˜íŠ¸ì™€ ì „ê¸°ì¥ì˜ ë‚´ì ($p \cdot E$)ì˜ ê·¸ë˜ë””ì–¸íŠ¸ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.

$$F_{electric} = \nabla(p \cdot E)$$

**ì„±ë¶„ë³„ ì „ê°œ (ìˆ˜ì •ë¨):** $p \cdot E = p_0 E_z$ ì´ë¯€ë¡œ, ê° ì„±ë¶„ì€ $E_z$ì˜ ê³µê°„ì— ëŒ€í•œ í¸ë¯¸ë¶„ìœ¼ë¡œ í‘œí˜„ë©ë‹ˆë‹¤.

- $F_{electric,x} = p_0 \frac{\partial E_z}{\partial x}$
- $F_{electric,y} = p_0 \frac{\partial E_z}{\partial y}$
- $F_{electric,z} = p_0 \frac{\partial E_z}{\partial z}$

---

#### 1.2.3 í™”í•™ì  ì¶”ì§„ë ¥ ($F_{chemical}$) ğŸ§ª

**ë†ë„ êµ¬ë°°ì— ì˜í•œ ì¶”ì§„ë ¥:** í™”í•™ ì—°ë£Œì˜ ë†ë„(c) ì°¨ì´ë¥¼ ì´ìš©í•´ ì¶”ì§„ë ¥ì„ ì–»ìŠµë‹ˆë‹¤.

$$F_{chemical} = -k_B T \nabla \ln(c)[\text{cite: 29}]$$

(ì—¬ê¸°ì„œ këŠ” ë³¼ì¸ ë§Œ ìƒìˆ˜, TëŠ” ì˜¨ë„)

**ë‹¤ì„±ë¶„ ì‹œìŠ¤í…œì˜ ê²½ìš°:** ê° ì„±ë¶„ì˜ íš¨ìœ¨ ê³„ìˆ˜($\eta_i$)ë¥¼ ê³ ë ¤í•©ë‹ˆë‹¤.

$$F_{chemical} = -\sum_i k_B T \nabla \ln(c_i) \eta_i[\text{cite: 32}]$$

---

## 2. ìœ„ì¹˜ ì œì–´ ì•Œê³ ë¦¬ì¦˜

### 2.1 3D ê³µê°„ì—ì„œì˜ ìœ„ì¹˜ ì œì–´ ğŸ“

**ëª©í‘œ ìœ„ì¹˜:**

$r_{target}$ì™€ í˜„ì¬ ìœ„ì¹˜($r_{current}$) ê°„ì˜ ì˜¤ì°¨($e_{pos}$)ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

$$e_{pos} = r_{target} - r_{current}[\text{cite: 36}]$$

**PID ì œì–´ê¸° ì„¤ê³„:** ìœ„ì¹˜ ì˜¤ì°¨ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•„ìš”í•œ ì œì–´ë ¥ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

$$F_{control} = K_p e_{pos} + K_i \int e_{pos} dt + K_d \frac{de_{pos}}{dt}[\text{cite: 38}]$$

**ì„±ë¶„ë³„ ì œì–´ë ¥:**

- $F_{x,control} = K_{p,x}(x_t - x_c) + K_{i,x} \int (x_t - x_c)dt + K_{d,x} \frac{d(x_t - x_c)}{dt}$
- $F_{y,control} = K_{p,y}(y_t - y_c) + K_{i,y} \int (y_t - y_c)dt + K_{d,y} \frac{d(y_t - y_c)}{dt}$
- $F_{z,control} = K_{p,z}(z_t - z_c) + K_{i,z} \int (z_t - z_c)dt + K_{d,z} \frac{d(z_t - z_c)}{dt}$

---

### 2.2 ì ì‘í˜• ê²Œì¸ ì¡°ì •

**í™˜ê²½ ì¡°ê±´ì— ë”°ë¼ PID ê²Œì¸ì„ ìë™ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ì œì–´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.**

$$K_p(t) = K_{p,0}[1 + \alpha |e_{pos}| + |\text{cite}_e \text{start}| \beta | \frac{de_{pos}}{dt} |][\text{cite: 45}]$$

(ì—¬ê¸°ì„œ $\alpha, \beta$ëŠ” ì ì‘ ê³„ìˆ˜)

---

### 2.3 ì¥ì• ë¬¼ íšŒí”¼ ì•Œê³ ë¦¬ì¦˜ ğŸš§

**ì¸ê³µ í¬í…ì…œ í•„ë“œ ë°©ë²•:** ì¥ì• ë¬¼ ì£¼ë³€ì— ê°€ìƒì˜ ì²™ë ¥ì¥(repulsive potential field)ì„ ìƒì„±í•˜ì—¬ íšŒí”¼ ê¸°ë™ì„ ìœ ë„í•©ë‹ˆë‹¤.

$$U_{repulsive} = \frac{1}{2}K_r \left(\frac{1}{d} - \frac{1}{d_0}\right)^2 \quad \text{if } d \leq d_0[\text{cite: 49}]$$

(d: ì¥ì• ë¬¼ê¹Œì§€ì˜ ê±°ë¦¬, $d_0$: ì˜í–¥ ë°˜ê²½, $K_r$: ë°˜ë°œ ê³„ìˆ˜)

**íšŒí”¼ë ¥:** í¬í…ì…œ í•„ë“œì˜ ê·¸ë˜ë””ì–¸íŠ¸ë¥¼ ê³„ì‚°í•˜ì—¬ ì¥ì• ë¬¼ë¡œë¶€í„° ë©€ì–´ì§€ëŠ” í˜ì„ ìƒì„±í•©ë‹ˆë‹¤.

$$F_{avoidance} = -\nabla U_{repulsive} = K_r \left(\frac{1}{d} - \frac{1}{d_0}\right) \frac{1}{d^2} \hat{n}[\text{cite: 58}]$$

($\hat{n}$ëŠ” ì¥ì• ë¬¼ ë°©í–¥ì˜ ë‹¨ìœ„ë²¡í„°)

---

## 3. ìì„¸ ì œì–´ ì•Œê³ ë¦¬ì¦˜

### 3.1 ì˜¤ì¼ëŸ¬ ê° ê¸°ë°˜ ìì„¸ ì œì–´

**ìì„¸ ì˜¤ì°¨:** ëª©í‘œ ìì„¸ì™€ í˜„ì¬ ìì„¸ì˜ ì˜¤ì°¨ë¥¼ ë¡¤(roll), í”¼ì¹˜(pitch), ìš”(yaw) ê°ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.

**í† í¬ ì œì–´:** PD ì œì–´ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì„¸ ì˜¤ì°¨ë¥¼ ì¤„ì´ëŠ” ë°©í–¥ìœ¼ë¡œ ì œì–´ í† í¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

- $\tau_x = K_{p,\phi}e_{roll} + K_{d,\phi}e_{roll}$
- $\tau_y = K_{p,\theta}e_{pitch} + K_{d,\theta}e_{pitch}$
- $\tau_z = K_{p,\psi}e_{yaw} + K_{d,\psi}e_{yaw}$

---

### 3.2 ì¿¼í„°ë‹ˆì–¸ ê¸°ë°˜ ìì„¸ ì œì–´

**ì¿¼í„°ë‹ˆì–¸ ì˜¤ì°¨:** ì§ë²Œë½(gimbal lock) í˜„ìƒì´ ì—†ëŠ” ì¿¼í„°ë‹ˆì–¸ì„ ì‚¬ìš©í•˜ì—¬ ìì„¸ ì˜¤ì°¨ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

$$q_{error} = q_{target} \otimes q_{current}^*[\text{cite: 72}]$$

($\otimes$ëŠ” ì¿¼í„°ë‹ˆì–¸ ê³±ì…ˆ, *ëŠ” ê²°ë ˆ)

**ì œì–´ í† í¬:** ì¿¼í„°ë‹ˆì–¸ ì˜¤ì°¨ì˜ ë²¡í„° ì„±ë¶„ê³¼ ê°ì†ë„($\omega$)ë¥¼ ì´ìš©í•˜ì—¬ ì œì–´ í† í¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

$$\tau = -K_p \cdot \text{sign}(q_{error,0}) \cdot [q_{error,1}, q_{error,2}, q_{error,3}]^T - K_d \omega[\text{cite: 75}]$$

---

## 4. êµ°ì§‘ ì œì–´ ì•Œê³ ë¦¬ì¦˜ ğŸ¦‹ğŸ¦‹ğŸ¦‹

### 4.1 ì‘ì§‘ë ¥ (Cohesion)

**ê°œë³„ ë¡œë´‡ì´ ì´ì›ƒì˜ í‰ê·  ìœ„ì¹˜ë¡œ ì´ë™í•˜ë ¤ëŠ” í˜ì…ë‹ˆë‹¤.**

$$F_{cohesion,i} = K_c \frac{1}{N} \sum_{j=1}^N (r_j - r_i)[\text{cite: 78}]$$

---

### 4.2 ë¶„ë¦¬ë ¥ (Separation)

**ë¡œë´‡ë“¤ì´ ì„œë¡œ ë„ˆë¬´ ê°€ê¹Œì›Œì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ì²™ë ¥ì…ë‹ˆë‹¤.**

$$F_{separation,i} = K_s \sum_{j \neq i} \frac{r_i - r_j}{|r_i - r_j|^2} \quad \text{if } |r_i - r_j|[\text{cite}_e\text{start}] < R_s[\text{cite: 80}]$$

---

### 4.3 ì •ë ¬ë ¥ (Alignment)

**ê°œë³„ ë¡œë´‡ì´ ì´ì›ƒì˜ í‰ê·  ì´ë™ ë°©í–¥(ì†ë„)ê³¼ ì¼ì¹˜í•˜ë ¤ëŠ” í˜ì…ë‹ˆë‹¤.**

$$F_{alignment,i} = K_a \frac{1}{N} \sum_{j=1}^N (v_j - v_i)[\text{cite: 82}]$$

---

### 4.4 í†µí•© êµ°ì§‘ ì œì–´

**ë¦¬ë” ì¶”ì¢…ë ¥:** ì§€ì •ëœ ë¦¬ë” ë¡œë´‡ì„ ë”°ë¼ê°€ë„ë¡ í•˜ëŠ” í˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

$$F_{leader,i} = K_l(r_{leader} - r_i)[\text{cite: 86}]$$

**ìµœì¢… êµ°ì§‘ ì œì–´ë ¥:** ìœ„ ë„¤ ê°€ì§€ í˜ì„ ì¡°í•©í•˜ì—¬ êµ°ì§‘ í–‰ë™ì„ ì œì–´í•©ë‹ˆë‹¤.

$$F_{swarm,i} = F_{cohesion,i} + F_{separation,i} + F_{alignment,i} + F_{leader,i}[\text{cite: 84}]$$

---

## 5. í™˜ê²½ ì ì‘ ì•Œê³ ë¦¬ì¦˜

### 5.1 ìœ ì²´ ì €í•­ ë³´ìƒ

**ë ˆì´ë†€ì¦ˆ ìˆ˜(Re)ê°€ ë§¤ìš° ë‚®ì€ ì˜ì—­ (Re << 1):** ë‚˜ë…¸ìŠ¤ì¼€ì¼ì—ì„œëŠ” ìŠ¤í† í¬ìŠ¤ ë²•ì¹™(Stokes' Law)ì— ë”°ë¼ ìœ ì²´ ì €í•­ì„ ëª¨ë¸ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

$$F_{drag} = -6\pi\mu Rv[\text{cite: 91}]$$

**ë³´ìƒ ì œì–´:** ëª©í‘œ ì†ë„ë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ì˜ˆìƒë˜ëŠ” ì €í•­ë ¥ì„ ìƒì‡„í•˜ëŠ” í˜ì„ ì¶”ê°€ë¡œ ì¸ê°€í•©ë‹ˆë‹¤.

$$F_{compensation} = -F_{drag} = 6\pi\mu Rv[\text{cite: 93}]$$

---

### 5.2 ë¸Œë¼ìš´ ìš´ë™ì˜ ì˜í–¥ ì™„í™” (ìˆ˜ì •ë¨) ğŸ”„

**ë¸Œë¼ìš´ ìš´ë™ì— ì˜í•œ ë¬´ì‘ìœ„ë ¥:** ë‚˜ë…¸ë¡œë´‡ì€ ì£¼ë³€ ìœ ì²´ ë¶„ìë“¤ì˜ ì¶©ëŒë¡œ ì¸í•´ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ë¬´ì‘ìœ„ì  í˜($F_{brownian}$)ì„ ë°›ìŠµë‹ˆë‹¤.

$$F_{brownian} = \sqrt{2k_B T \gamma} \xi(t)[\text{cite: 96}]$$

(ì—¬ê¸°ì„œ Î³ëŠ” ë§ˆì°° ê³„ìˆ˜, $\vec{w}(t)$ëŠ” ë°±ìƒ‰ ì¡ìŒ ë²¡í„°)

**ëŒ€ì‘ ì „ëµ:** ì´ ë¬´ì‘ìœ„ì ì¸ í˜ì„ ì§ì ‘ ì˜ˆì¸¡í•˜ì—¬ ìƒì‡„í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì œì–´ ì‹œìŠ¤í…œì€ ë¸Œë¼ìš´ ìš´ë™ì˜ ì˜í–¥ì„ ì™„í™”í•˜ê³  ì´ì— ëŒ€í•œ 'ê²¬ê³ ì„±(robustness)'ì„ ê°–ë„ë¡ ì„¤ê³„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

**ì¹¼ë§Œ í•„í„° ê¸°ë°˜ ìƒíƒœ ì¶”ì •:** ì œì–´ ë£¨í”„ëŠ” ì¹¼ë§Œ í•„í„°(6.2ì ˆ)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¼ì„œ ì¸¡ì •ê°’ì— í¬í•¨ëœ ë¸Œë¼ìš´ ìš´ë™ ë…¸ì´ì¦ˆë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ê±¸ëŸ¬ë‚´ê³ , ë‚˜ë…¸ë¡œë´‡ì˜ ì‹¤ì œ ìœ„ì¹˜ì™€ ì†ë„ë¥¼ ë” ì •í™•í•˜ê²Œ ì¶”ì •í•©ë‹ˆë‹¤.

**ê°•ê±´í•œ í”¼ë“œë°± ì œì–´:** PID ì œì–´ê¸°(2.1ì ˆ)ëŠ” ì´ëŸ¬í•œ ë¯¸ì„¸í•œ ì™¸ë€ì„ ì—­ì œí•˜ê³  ëª©í‘œ ìƒíƒœë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì–´, ì¶”ì •ëœ ìƒíƒœ ì˜¤ì°¨ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™¸ë€ì„ ê·¹ë³µí•˜ê¸°ì— ì¶©ë¶„í•œ ì œì–´ë ¥ì„ ì§€ì†ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

---

### 5.3 í˜ˆë¥˜ ì ì‘ ì œì–´ ğŸ©¸

**ìƒëŒ€ ì†ë„:** í˜ˆë¥˜($v_{blood}$) ì†ì—ì„œ ë¡œë´‡ì˜ ìƒëŒ€ ì†ë„($v_{rel}$)ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

$$v_{rel} = v_{robot} - v_{blood}[\text{cite: 101}]$$

**í•­ë ¥:** í˜ˆë¥˜ì— ì˜í•´ ë°œìƒí•˜ëŠ” í•­ë ¥($F_{blood\_drag}$)ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

$$F_{blood\_drag} = -\frac{1}{2}\rho_{blood}C_d A |v_{rel}|[\text{cite}_e\text{start}]v_{rel}[\text{cite: 103}]$$

**ì ì‘ ì œì–´:** í•­ë ¥ì„ ê·¹ë³µí•˜ê³  ëª©í‘œ ì†ë„ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ì œì–´ë ¥ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

$$F_{blood\_adapt} = -F_{blood\_drag} + K_v(v_{target} - v_{robot})[\text{cite: 105}]$$

---

## 6. ì„¼ì„œ ìœµí•© ë° ìƒíƒœ ì¶”ì •

### 6.1 ì¹¼ë§Œ í•„í„° ê¸°ë°˜ ìœ„ì¹˜ ì¶”ì •

**ìƒíƒœ ë²¡í„°:** ìœ„ì¹˜ì™€ ì†ë„ë¥¼ ìƒíƒœ ë²¡í„°ë¡œ ì •ì˜í•©ë‹ˆë‹¤.

$$\mathbf{x} = [x, y, z, v_x, v_y, v_z]^T[\text{cite: 108}]$$

---

### 6.2 í™•ì¥ ì¹¼ë§Œ í•„í„° (ë¹„ì„ í˜• ì‹œìŠ¤í…œ)

**ë¹„ì„ í˜• ì‹œìŠ¤í…œì˜ ê²½ìš°:** ìƒíƒœ ë°©ì •ì‹($f$)ê³¼ ì¸¡ì • ë°©ì •ì‹($h$)ë¥¼ ì•¼ì½”ë¹„ì•ˆ í–‰ë ¬($\mathbf{F}_k, \mathbf{H}_k$)ì„ í†µí•´ ì„ í˜•í™”í•˜ì—¬ ì¹¼ë§Œ í•„í„°ë¥¼ ì ìš©í•©ë‹ˆë‹¤.

- $\mathbf{x}_k^- = f(\mathbf{x}_{k-1}, \mathbf{u}_{k-1}, \mathbf{w}_{k-1})$
- $\mathbf{F}_{k-1} = \frac{\partial f}{\partial \mathbf{x}}|_{\mathbf{x}_{k-1|k-1}}$
- $\mathbf{H}_k = \frac{\partial h}{\partial \mathbf{x}}|_{\mathbf{x}_{k|k-1}}$

**ì˜ˆì¸¡ ë‹¨ê³„:** ì´ì „ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ ìƒíƒœë¥¼ ì˜ˆì¸¡í•©ë‹ˆë‹¤.

- $\hat{\mathbf{x}}_{k|k-1} = \mathbf{F}\hat{\mathbf{x}}_{k-1|k-1}$
- $\hat{\mathbf{P}}_{k|k-1} = \mathbf{F}\mathbf{P}_{k-1|k-1}\mathbf{F}^T + \mathbf{Q}$

**ì—…ë°ì´íŠ¸ ë‹¨ê³„:** ì„¼ì„œ ì¸¡ì •ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì˜ˆì¸¡ëœ ìƒíƒœë¥¼ ë³´ì •í•©ë‹ˆë‹¤.

- $\mathbf{K}_k = \hat{\mathbf{P}}_{k|k-1}\mathbf{H}^T(\mathbf{H}\mathbf{P}_{k|k-1}\mathbf{H}^T + \mathbf{R})^{-1}$
- $\hat{\mathbf{x}}_{k|k} = \hat{\mathbf{x}}_{k|k-1} + \mathbf{K}_k(\mathbf{z}_k - \mathbf{H}\hat{\mathbf{x}}_{k|k-1})$
- $\hat{\mathbf{P}}_{k|k} = (\mathbf{I} - \mathbf{K}_k\mathbf{H})\mathbf{P}_{k|k-1}$

---

## 7. ìµœì  ì œì–´ ì•Œê³ ë¦¬ì¦˜

### 7.1 LQR (Linear Quadratic Regulator)

**ë¹„ìš© í•¨ìˆ˜:** ìƒíƒœ ì˜¤ì°¨ì™€ ì œì–´ ì…ë ¥ì„ ìµœì†Œí™”í•˜ëŠ” ë¹„ìš© í•¨ìˆ˜ Jë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

$$J = \int_0^\infty (\mathbf{x}^T \mathbf{Q}\mathbf{x} + \mathbf{u}^T \mathbf{R}\mathbf{u})dt[\text{cite: 129}]$$

**ìµœì  ì œì–´ ì…ë ¥:** ë¹„ìš© í•¨ìˆ˜ë¥¼ ìµœì†Œí™”í•˜ëŠ” ì œì–´ ì…ë ¥ $\mathbf{u}$ëŠ” ìƒíƒœ í”¼ë“œë°± í˜•íƒœë¥¼ ê°€ì§‘ë‹ˆë‹¤.

$$\mathbf{u} = -\mathbf{K}\mathbf{x} = -\mathbf{R}^{-1}\mathbf{B}^T\mathbf{P}\mathbf{x}[\text{cite: 131}]$$

(ì—¬ê¸°ì„œ $\mathbf{P}$ëŠ” ë¦¬ì¹´í‹° ë°©ì •ì‹(Riccati equation)ì˜ í•´)

---

### 7.2 ëª¨ë¸ ì˜ˆì¸¡ ì œì–´ (MPC)

**ìµœì í™” ë¬¸ì œ:** ë¯¸ë˜ì˜ ì˜ˆì¸¡ êµ¬ê°„(N) ë™ì•ˆì˜ ìƒíƒœì™€ ì…ë ¥ì„ ìµœì í™”í•©ë‹ˆë‹¤.

$$\min_{\mathbf{u}} \sum_{k=0}^{N-1} (||\mathbf{x}_{k+1} - \mathbf{x}_{ref}||_Q^2 + ||\mathbf{u}_k||_{\mathbf{R}}^2)[\text{cite: 136}]$$

**ì œì•½ ì¡°ê±´:** ì‹œìŠ¤í…œ ëª¨ë¸ê³¼ ë¬¼ë¦¬ì  ì œì•½(ì…ë ¥/ìƒíƒœ ì œí•œ) í•˜ì—ì„œ ìµœì í•´ë¥¼ ì°¾ìŠµë‹ˆë‹¤.

---

## 8. í†µì‹  ë° ë„¤íŠ¸ì›Œí‚¹ ì•Œê³ ë¦¬ì¦˜

### 8.1 ë¶„ì‚° í•©ì˜ ì•Œê³ ë¦¬ì¦˜

**ê° ë¡œë´‡ì´ ì´ì›ƒ ë¡œë´‡ê³¼ì˜ í†µì‹ ì„ í†µí•´ ìì‹ ì˜ ìƒíƒœ($\mathbf{x}_i$)ë¥¼ ì£¼ë³€ì˜ í‰ê· ê°’ìœ¼ë¡œ ìˆ˜ë ´ì‹œí‚µë‹ˆë‹¤.**

$$\mathbf{x}_i(t+1) = \mathbf{x}_i(t) + \epsilon \sum_{j \in N_i} a_{ij}(\mathbf{x}_j(t) - \mathbf{x}_i(t))[\text{cite: 143}]$$

($N_i$: ë¡œë´‡ iì˜ ì´ì›ƒ ì§‘í•©, $a_{ij}$: ì¸ì ‘ í–‰ë ¬ ì›ì†Œ, Ïµ: í•™ìŠµë¥ )

---

### 8.2 ë¶„ì‚° ìµœì í™” (ADMM)

**ì „ì²´ êµ°ì§‘ì˜ ì „ì—­ ëª©ì  í•¨ìˆ˜($\sum f_i(\mathbf{x}_i)$)ë¥¼ ê° ë¡œë´‡ì´ ìì‹ ì˜ ì§€ì—­ ë³€ìˆ˜ì™€ ì´ì›ƒ ë³€ìˆ˜(dual variable)ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¶„ì‚°í•˜ì—¬ ìµœì í™”í•©ë‹ˆë‹¤.**

---

## 9. ìˆ˜ìš©ì²´ ì„±í˜¸ì‘ìš© ì œì–´ ì•Œê³ ë¦¬ì¦˜

### 9.1 ìˆ˜ìš©ì²´ ê²°í•© ë™ì—­í•™

**ê²°í•© ì‘ìš© ë²•ì¹™:** ìˆ˜ìš©ì²´(R)ì™€ ë¦¬ê°„ë“œ(L)ì˜ ê²°í•© ë° í•´ë¦¬ ì†ë„ë¥¼ ëª¨ë¸ë§í•©ë‹ˆë‹¤.

$$\frac{d[RL]}{dt} = k_{on}[R][L] - k_{off}[RL][\text{cite: 159}]$$

**í‰í˜• ìƒíƒœ:** í‰í˜• ìƒíƒœì—ì„œ ê²°í•© ë³µí•©ì²´([RL])ì˜ ë†ë„ëŠ” í•´ë¦¬ ìƒìˆ˜($K_d$)ì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.

$$[RL] = \frac{[R_{total}][L]}{K_d + [L]}[\text{cite: 161}]$$

---

### 9.2 í˜‘ë™ ê²°í•© ëª¨ë¸

**í ë°©ì •ì‹(Hill Equation):** ì—¬ëŸ¬ ë¦¬ê°„ë“œê°€ í˜‘ë™ì ìœ¼ë¡œ ê²°í•©í•˜ëŠ” í˜„ìƒì„ í ê³„ìˆ˜(n)ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë¸ë§í•©ë‹ˆë‹¤.

$$\theta = \frac{[RL]}{[R_{total}]} = \frac{[L]^n}{K_d^n + [L]^n}[\text{cite: 165}]$$

---

### 9.3 ì‹¤ì‹œê°„ ë†ë„ ì œì–´

**ëª©í‘œ ê²°í•©ìœ¨($\theta_{target}$)ê³¼ í˜„ì¬ ê²°í•©ìœ¨($\theta_{current}$)ì˜ ì˜¤ì°¨ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¦¬ê°„ë“œ ë†ë„([L])ë¥¼ ì œì–´í•©ë‹ˆë‹¤.**

$$[L]_{new} = [L]_{current} \left(\frac{\theta_{target}}{\theta_{current}}\right)^{1/n} \times \text{correction\_factor}[\text{cite: 171}]$$

(ë³´ì • ì¸ìëŠ” ë¯¸ì œì–´ê¸° í˜•íƒœë¡œ ì„¤ê³„)

---

## 10. ì‹¤ì‹œê°„ êµ¬í˜„ ì•Œê³ ë¦¬ì¦˜

### 10.1 ì „ì²´ ì œì–´ ë£¨í”„

**Algorithm: Nanorobot_Control_Loop**

**Input:** `target_position`, `target_orientation`, `sensor_data`

**Output:** `control_forces`, `control_torques`

1. **INITIALIZATION:**
   - Set Kp, Ki, Kd gains
   - Initialize state estimator (e.g., Kalman Filter)

2. **MAIN LOOP (e.g., Î”t = 1 ms):**

   a) **SENSOR FUSION:**
   ```
   current_state = kalman_filter(sensor_data)
   ```

   b) **POSITION CONTROL:**
   ```
   F_pos = PID_control(pos_error, vel_error)
   ```

   c) **ORIENTATION CONTROL:**
   ```
   T_orient = quaternion_PID(quat_error, angular_velocity)
   ```

   d) **SWARM COORDINATION:**
   ```
   F_swarm = swarm_control(neighbor_info)
   ```

   e) **ENVIRONMENTAL ADAPTATION:**
   ```
   F_blood = blood_flow_compensation()
   ```

   f) **RECEPTOR INTERACTION:**
   ```
   F_receptor = receptor_control(receptor_state)
   ```

   g) **FORCE AGGREGATION:**
   ```
   F_total = F_pos + F_swarm + F_blood + ...
   ```

   h) **ACTUATOR CONTROL:**
   ```
   magnetic_field = force_to_magnetic_field(F_total)
   electric_field = torque_to_electric_field(T_total)
   ```

3. **END LOOP**

---

### 10.2 ë¶„ì‚° ì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜

**ë‚˜ë…¸ë¡œë´‡ ë‚´ë¶€ì˜ ì—°ì‚°ì„ ë³‘ë ¬ ì²˜ë¦¬í•˜ì—¬ ì‹¤ì‹œê°„ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.**

- **Thread 1: Sensor_Processing** (ì„¼ì„œ ë°ì´í„° í•„í„°ë§, ìƒíƒœ ì¶”ì •)
- **Thread 2: Control_Computation** (PID, êµ°ì§‘ ì•Œê³ ë¦¬ì¦˜ ë“± ì œì–´ ì—°ì‚°)
- **Thread 3: Communication** (ì´ì›ƒ ë°ì´í„° êµí™˜, ê±´ì¡° í”„ë¡œí† ì½œ)
- **Thread 4: Actuator_Control** (ì „ìê¸°ì¥ ìƒì„±, í™”í•™ ë¬¼ì§ˆ ë°©ì¶œ)

---

### 10.3 ì ì‘í˜• ìƒ˜í”Œë§ ì•Œê³ ë¦¬ì¦˜

**ì‹œìŠ¤í…œì˜ ì˜¤ì°¨ í¬ê¸°ì— ë”°ë¼ ì œì–´ ì£¼ê¸°(Î”t)ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ê³„ì‚° íš¨ìœ¨ì„±ì„ ë†’ì…ë‹ˆë‹¤.**

- `if (||error|| > threshold_high): Î”t = Î”t_min`
- `elif (||error|| < threshold_low): Î”t = min(Î”t_max, Î”t * 1.1)`

---

> **(ì„¤ëª… ì£¼ê°€)** ì´ ë‹¨ê³„ëŠ” ê³„ì‚°ëœ ëª©í‘œ í˜ê³¼ í† í¬ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì™¸ë¶€ ì „ìê¸° ì½”ì¼ ë° ì „ì¥ ì‹œìŠ¤í…œë„ ê³¼ì •ì…ë‹ˆë‹¤. ì´ëŠ” ë¬¼ë¦¬ì  ëª¨ë¸ë¡œë¶€í„° í™˜ì‚°í•œ ì¶œë ¥ì„ ìƒì„±í•˜ê¸° ìœ„í•œ ì—­ì‘ìš© ì²« ì¸¡ì •ê°’ ì—­ ë¬¸ì œ(inverse problem)ì— í•´ë‹¹í•˜ë©°, ì‹¤ì œ ì‹œìŠ¤í…œ êµ¬í˜„ì—ì„œ í•µì‹¬ì ì¸ ê¸°ìˆ ì  ê³¼ì œì…ë‹ˆë‹¤.

**COMMUNICATION:** `broadcast_state(current_state)`

**SAFETY CHECK:** `if (safety_violation()) emergency_stop()`